{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nimport React, { useContext, useState, useCallback } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport { Container } from \"native-base\";\nimport { useFocusEffect } from \"@react-navigation/native\";\nimport AsyncStorage from \"@react-native-community/async-storage\";\nimport OrderCard from \"../../Shared/OrderCard\";\nimport axios from \"axios\";\nimport baseURL from \"../../assets/common/baseUrl\";\nimport AuthGlobal from \"../../Context/store/AuthGlobal\";\nimport { logoutUser } from \"../../Context/actions/Auth.actions\";\nimport { useEffect } from 'react/cjs/react.development';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar UserProfile = function UserProfile(props) {\n  var context = useContext(AuthGlobal);\n  var _useState = useState(),\n    _useState2 = _slicedToArray(_useState, 2),\n    userProfile = _useState2[0],\n    setUserProfile = _useState2[1];\n  var _useState3 = useState(),\n    _useState4 = _slicedToArray(_useState3, 2),\n    orders = _useState4[0],\n    setOrders = _useState4[1];\n  useFocusEffect(useCallback(function () {\n    if (context.stateUser.isAuthenticated === false || context.stateUser.isAuthenticated === null) {\n      props.navigation.navigate(\"Login\");\n    }\n    AsyncStorage.getItem(\"jwt\").then(function (res) {\n      axios.get(baseURL + \"users/\" + context.stateUser.user.sub, {\n        headers: {\n          Authorization: \"Bearer \" + res\n        }\n      }).then(function (user) {\n        return setUserProfile(user.data);\n      });\n    }).catch(function (error) {\n      return console.log(error);\n    });\n    axios.get(baseURL + \"orders\").then(function (x) {\n      var data = x.data;\n      console.log(data);\n      var userOrders = data.filter(function (order) {\n        return order.user._id === context.stateUser.user.sub;\n      });\n      setOrders(userOrders);\n    }).catch(function (error) {\n      return console.log(error);\n    });\n    return function () {\n      setUserProfile();\n      setOrders();\n    };\n  }, [context.stateUser.isAuthenticated]));\n  return _jsx(Container, {\n    style: styles.container,\n    children: _jsxs(ScrollView, {\n      contentContainerStyle: styles.subContainer,\n      children: [_jsx(Text, {\n        style: {\n          fontSize: 30\n        },\n        children: userProfile ? userProfile.name : \"\"\n      }), _jsxs(View, {\n        style: {\n          marginTop: 20\n        },\n        children: [_jsxs(Text, {\n          style: {\n            margin: 10\n          },\n          children: [\"Email: \", userProfile ? userProfile.email : \"\"]\n        }), _jsxs(Text, {\n          style: {\n            margin: 10\n          },\n          children: [\"Phone: \", userProfile ? userProfile.phone : \"\"]\n        })]\n      }), _jsx(View, {\n        style: {\n          marginTop: 80\n        },\n        children: _jsx(Button, {\n          title: \"Sign Out\",\n          onPress: function onPress() {\n            return [AsyncStorage.removeItem(\"jwt\"), logoutUser(context.dispatch)];\n          }\n        })\n      }), _jsxs(View, {\n        style: styles.order,\n        children: [_jsx(Text, {\n          style: {\n            fontSize: 20\n          },\n          children: \"My Orders\"\n        }), _jsx(View, {\n          children: orders ? orders.map(function (x) {\n            return _jsx(OrderCard, _objectSpread({}, x), x.id);\n          }) : _jsx(View, {\n            style: styles.order,\n            children: _jsx(Text, {\n              children: \"You have no orders\"\n            })\n          })\n        })]\n      })]\n    })\n  });\n};\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    alignItems: \"center\"\n  },\n  subContainer: {\n    alignItems: \"center\",\n    marginTop: 60\n  },\n  order: {\n    marginTop: 20,\n    alignItems: \"center\",\n    marginBottom: 60\n  }\n});\nexport default UserProfile;","map":{"version":3,"names":["React","useContext","useState","useCallback","Container","useFocusEffect","AsyncStorage","OrderCard","axios","baseURL","AuthGlobal","logoutUser","useEffect","UserProfile","props","context","userProfile","setUserProfile","orders","setOrders","stateUser","isAuthenticated","navigation","navigate","getItem","then","res","get","user","sub","headers","Authorization","data","catch","error","console","log","x","userOrders","filter","order","_id","styles","container","subContainer","fontSize","name","marginTop","margin","email","phone","removeItem","dispatch","map","id","StyleSheet","create","flex","alignItems","marginBottom"],"sources":["C:/Users/AfroMiNA/OneDrive/Desktop/ecom/mern-stack-ecommerce/easy-shop/Screens/User/UserProfile.js"],"sourcesContent":["import React, { useContext, useState, useCallback } from 'react';\r\nimport { View, Text, ScrollView, Button, StyleSheet } from 'react-native';\r\nimport { Container } from \"native-base\"\r\nimport { useFocusEffect } from \"@react-navigation/native\"\r\nimport AsyncStorage from \"@react-native-community/async-storage\"\r\nimport OrderCard from \"../../Shared/OrderCard\"\r\n\r\nimport axios from \"axios\"\r\nimport baseURL from \"../../assets/common/baseUrl\"\r\n\r\nimport AuthGlobal from \"../../Context/store/AuthGlobal\"\r\nimport { logoutUser } from \"../../Context/actions/Auth.actions\"\r\nimport { useEffect } from 'react/cjs/react.development';\r\n\r\nconst UserProfile = (props) => {\r\n    const context = useContext(AuthGlobal)\r\n    const [userProfile, setUserProfile] = useState()\r\n    const [orders, setOrders] = useState()\r\n\r\n    useFocusEffect(\r\n        useCallback(() => {\r\n        if (\r\n            context.stateUser.isAuthenticated === false || \r\n            context.stateUser.isAuthenticated === null\r\n        ) {\r\n            props.navigation.navigate(\"Login\")\r\n        }\r\n\r\n        AsyncStorage.getItem(\"jwt\")\r\n            .then((res) => {\r\n                axios\r\n                    .get(`${baseURL}users/${context.stateUser.user.sub}`, {\r\n                        headers: { Authorization: `Bearer ${res}` },\r\n                    })\r\n                    .then((user) => setUserProfile(user.data))\r\n            })\r\n            .catch((error) => console.log(error))\r\n\r\n        axios\r\n        .get(`${baseURL}orders`)\r\n        .then((x) => {\r\n            const data = x.data;\r\n            console.log(data)\r\n            const userOrders = data.filter(\r\n                (order) => order.user._id === context.stateUser.user.sub\r\n            );\r\n            setOrders(userOrders);\r\n        })\r\n        .catch((error) => console.log(error))\r\n\r\n        return () => {\r\n            setUserProfile();\r\n            setOrders();\r\n        }\r\n\r\n    }, [context.stateUser.isAuthenticated]))\r\n\r\n    return (\r\n       <Container style={styles.container}>\r\n           <ScrollView contentContainerStyle={styles.subContainer}>\r\n               <Text style={{ fontSize: 30 }}>\r\n                   {userProfile ? userProfile.name : \"\" }\r\n               </Text>\r\n               <View style={{ marginTop: 20 }}>\r\n                    <Text style={{ margin: 10 }}>\r\n                        Email: {userProfile ? userProfile.email : \"\"}\r\n                    </Text>\r\n                    <Text style={{ margin: 10 }}>\r\n                        Phone: {userProfile ? userProfile.phone : \"\"}\r\n                    </Text>\r\n               </View>\r\n               <View style={{ marginTop: 80 }}>\r\n                    <Button title={\"Sign Out\"} onPress={() => [\r\n                        AsyncStorage.removeItem(\"jwt\"),\r\n                        logoutUser(context.dispatch)\r\n                    ]}/>\r\n               </View>\r\n               <View style={styles.order}>\r\n                   <Text style={{ fontSize: 20 }}>My Orders</Text>\r\n                   <View>\r\n                       {orders ? (\r\n                           orders.map((x) => {\r\n                               return <OrderCard key={x.id} {...x} />;\r\n                           })\r\n                       ) : (\r\n                           <View style={styles.order}>\r\n                               <Text>You have no orders</Text>\r\n                           </View>\r\n                       )}\r\n                   </View>\r\n               </View>\r\n           </ScrollView>\r\n       </Container>\r\n    )\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n    container: {\r\n        flex: 1,\r\n        alignItems: \"center\"\r\n    },\r\n    subContainer: {\r\n        alignItems: \"center\",\r\n        marginTop: 60\r\n    },\r\n    order: {\r\n        marginTop: 20,\r\n        alignItems: \"center\",\r\n        marginBottom: 60\r\n    }\r\n})\r\n\r\nexport default UserProfile;"],"mappings":"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"},"metadata":{},"sourceType":"module"}