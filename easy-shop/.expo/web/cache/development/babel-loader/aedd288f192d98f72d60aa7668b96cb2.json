{"ast":null,"code":"Object.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _jsxFileName = 'src/basic/Tabs/index.js';\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _createReactClass = require('create-react-class');\n\nvar _createReactClass2 = _interopRequireDefault(_createReactClass);\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _utils = require(\"../../utils\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar React = require('react');\n\nvar Component = React.Component;\n\nvar ReactNative = require(\"react-native-web/dist/index\");\n\nvar Dimensions = ReactNative.Dimensions,\n    View = ReactNative.View,\n    Animated = ReactNative.Animated,\n    ScrollView = ReactNative.ScrollView,\n    StyleSheet = ReactNative.StyleSheet,\n    Platform = ReactNative.Platform;\n\nvar SceneComponent = require(\"./SceneComponent\");\n\nvar _require = require(\"./DefaultTabBar\"),\n    DefaultTabBar = _require.DefaultTabBar;\n\nvar _require2 = require(\"./ScrollableTabBar\"),\n    ScrollableTabBar = _require2.ScrollableTabBar;\n\nvar ScrollableTabView = (0, _createReactClass2.default)({\n  displayName: 'ScrollableTabView',\n  statics: {\n    DefaultTabBar: DefaultTabBar,\n    ScrollableTabBar: ScrollableTabBar\n  },\n  propTypes: {\n    tabBarPosition: _propTypes2.default.oneOf(['top', 'bottom', 'overlayTop', 'overlayBottom']),\n    initialPage: _propTypes2.default.number,\n    page: _propTypes2.default.number,\n    onChangeTab: _propTypes2.default.func,\n    onScroll: _propTypes2.default.func,\n    renderTabBar: _propTypes2.default.any,\n    style: _utils.ViewPropTypes.style,\n    contentProps: _propTypes2.default.object,\n    scrollWithoutAnimation: _propTypes2.default.bool,\n    locked: _propTypes2.default.bool,\n    prerenderingSiblingsNumber: _propTypes2.default.number\n  },\n  getDefaultProps: function getDefaultProps() {\n    return {\n      tabBarPosition: 'top',\n      initialPage: 0,\n      page: -1,\n      onChangeTab: function onChangeTab() {},\n      onScroll: function onScroll() {},\n      contentProps: {},\n      scrollWithoutAnimation: false,\n      locked: false,\n      prerenderingSiblingsNumber: 0\n    };\n  },\n  getInitialState: function getInitialState() {\n    return {\n      currentPage: this.props.initialPage,\n      scrollValue: new Animated.Value(this.props.initialPage),\n      containerWidth: Dimensions.get('window').width,\n      sceneKeys: this.newSceneKeys({\n        currentPage: this.props.initialPage\n      })\n    };\n  },\n  componentDidMount: function componentDidMount() {\n    var _this = this;\n\n    var scrollFn = function scrollFn() {\n      if (_this.scrollView) {\n        _this.state.scrollValue.setValue(_this.props.initialPage);\n      }\n    };\n\n    _utils.InteractionManager.runAfterInteractions(scrollFn);\n\n    this.scrollToTimer = setTimeout(function () {\n      if (_this.scrollView) {\n        _this.scrollView.scrollTo({\n          x: _this.props.initialPage * _this.state.containerWidth,\n          animated: false\n        });\n      }\n    });\n  },\n  componentWillUnmount: function componentWillUnmount() {\n    if (this.scrollToTimer) {\n      clearTimeout(this.scrollToTimer);\n    }\n  },\n  UNSAFE_componentWillReceiveProps: function UNSAFE_componentWillReceiveProps(props) {\n    if (props.children !== this.props.children) {\n      this.updateSceneKeys({\n        page: this.state.currentPage,\n        children: props.children\n      });\n    }\n\n    if (props.page >= 0 && props.page !== this.state.currentPage) {\n      this.goToPage(props.page);\n    }\n  },\n  goToPage: function goToPage(pageNumber) {\n    var offset = pageNumber * this.state.containerWidth;\n\n    if (this.scrollView) {\n      this.scrollView.scrollTo({\n        x: offset,\n        y: 0,\n        animated: !this.props.scrollWithoutAnimation\n      });\n    }\n\n    var currentPage = this.state.currentPage;\n    this.updateSceneKeys({\n      page: pageNumber,\n      callback: this._onChangeTab.bind(this, currentPage, pageNumber)\n    });\n  },\n  renderTabBar: function renderTabBar(props) {\n    if (this.props.renderTabBar === false) {\n      return null;\n    } else if (this.props.renderTabBar) {\n      return React.cloneElement(this.props.renderTabBar(props), props);\n    }\n\n    return React.createElement(DefaultTabBar, _extends({}, props, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      }\n    }));\n  },\n  updateSceneKeys: function updateSceneKeys(_ref) {\n    var page = _ref.page,\n        _ref$children = _ref.children,\n        children = _ref$children === undefined ? this.props.children : _ref$children,\n        _ref$callback = _ref.callback,\n        callback = _ref$callback === undefined ? function () {} : _ref$callback;\n    var newKeys = this.newSceneKeys({\n      previousKeys: this.state.sceneKeys,\n      currentPage: page,\n      children: children\n    });\n    this.setState({\n      currentPage: page,\n      sceneKeys: newKeys\n    }, callback);\n  },\n  newSceneKeys: function newSceneKeys(_ref2) {\n    var _this2 = this;\n\n    var _ref2$previousKeys = _ref2.previousKeys,\n        previousKeys = _ref2$previousKeys === undefined ? [] : _ref2$previousKeys,\n        _ref2$currentPage = _ref2.currentPage,\n        currentPage = _ref2$currentPage === undefined ? 0 : _ref2$currentPage,\n        _ref2$children = _ref2.children,\n        children = _ref2$children === undefined ? this.props.children : _ref2$children;\n    var newKeys = [];\n\n    this._children(children).forEach(function (child, idx) {\n      var key = _this2._makeSceneKey(child, idx);\n\n      if (_this2._keyExists(previousKeys, key) || _this2._shouldRenderSceneKey(idx, currentPage)) {\n        newKeys.push(key);\n      }\n    });\n\n    return newKeys;\n  },\n  _shouldRenderSceneKey: function _shouldRenderSceneKey(idx, currentPageKey) {\n    var numOfSibling = this.props.prerenderingSiblingsNumber;\n    return idx < currentPageKey + numOfSibling + 1 && idx > currentPageKey - numOfSibling - 1;\n  },\n  _keyExists: function _keyExists(sceneKeys, key) {\n    return sceneKeys.find(function (sceneKey) {\n      return key === sceneKey;\n    });\n  },\n  _makeSceneKey: function _makeSceneKey(child, idx) {\n    return child.props.heading + '_' + idx;\n  },\n  renderScrollableContent: function renderScrollableContent() {\n    var _this3 = this;\n\n    var scenes = this._composeScenes();\n\n    return React.createElement(ScrollView, _extends({\n      horizontal: true,\n      pagingEnabled: true,\n      automaticallyAdjustContentInsets: false,\n      keyboardShouldPersistTaps: 'handled',\n      contentOffset: {\n        x: this.props.initialPage * this.state.containerWidth\n      },\n      ref: function ref(scrollView) {\n        _this3.scrollView = scrollView;\n      },\n      onScroll: function onScroll(e) {\n        var offsetX = e.nativeEvent.contentOffset.x;\n\n        _this3._updateScrollValue(offsetX / _this3.state.containerWidth);\n      },\n      onMomentumScrollBegin: this._onMomentumScrollBeginAndEnd,\n      onMomentumScrollEnd: this._onMomentumScrollBeginAndEnd,\n      scrollEventThrottle: 16,\n      scrollsToTop: false,\n      showsHorizontalScrollIndicator: false,\n      scrollEnabled: !this.props.locked,\n      directionalLockEnabled: true,\n      alwaysBounceVertical: false,\n      keyboardDismissMode: 'on-drag'\n    }, this.props.contentProps, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182\n      }\n    }), scenes);\n  },\n  _composeScenes: function _composeScenes() {\n    var _this4 = this;\n\n    return this._children().map(function (child, idx) {\n      var key = _this4._makeSceneKey(child, idx);\n\n      return React.createElement(SceneComponent, {\n        key: child.key,\n        shouldUpdated: _this4._shouldRenderSceneKey(idx, _this4.state.currentPage),\n        style: {\n          width: _this4.state.containerWidth\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 217\n        }\n      }, _this4._keyExists(_this4.state.sceneKeys, key) ? child : React.createElement(View, {\n        heading: child.props.heading,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 228\n        }\n      }));\n    });\n  },\n  _onMomentumScrollBeginAndEnd: function _onMomentumScrollBeginAndEnd(e) {\n    var offsetX = e.nativeEvent.contentOffset.x;\n    var page = Math.round(offsetX / this.state.containerWidth);\n\n    if (this.state.currentPage !== page) {\n      this._updateSelectedPage(page);\n    }\n  },\n  _updateSelectedPage: function _updateSelectedPage(nextPage) {\n    var localNextPage = nextPage;\n\n    if (typeof localNextPage === 'object') {\n      localNextPage = nextPage.nativeEvent.position;\n    }\n\n    var currentPage = this.state.currentPage;\n    this.updateSceneKeys({\n      page: localNextPage,\n      callback: this._onChangeTab.bind(this, currentPage, localNextPage)\n    });\n  },\n  _onChangeTab: function _onChangeTab(prevPage, currentPage) {\n    this.props.onChangeTab({\n      i: currentPage,\n      ref: this._children()[currentPage],\n      from: prevPage\n    });\n  },\n  _updateScrollValue: function _updateScrollValue(value) {\n    this.state.scrollValue.setValue(value);\n    this.props.onScroll(value);\n  },\n  _handleLayout: function _handleLayout(e) {\n    var _this5 = this;\n\n    var width = e.nativeEvent.layout.width;\n\n    if (!width || width <= 0 || Math.round(width) === Math.round(this.state.containerWidth)) {\n      return;\n    }\n\n    this.setState({\n      containerWidth: width\n    });\n    this.requestAnimationFrame(function () {\n      _this5.goToPage(_this5.state.currentPage);\n    });\n  },\n  _children: function _children() {\n    var children = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.props.children;\n    return React.Children.map(children, function (child) {\n      return child;\n    });\n  },\n  render: function render() {\n    var overlayTabs = this.props.tabBarPosition === 'overlayTop' || this.props.tabBarPosition === 'overlayBottom';\n    var tabBarProps = {\n      goToPage: this.goToPage,\n      tabs: this._children().map(function (child) {\n        return child.props.heading;\n      }),\n      tabStyle: this._children().map(function (child) {\n        return child.props.tabStyle;\n      }),\n      activeTabStyle: this._children().map(function (child) {\n        return child.props.activeTabStyle;\n      }),\n      textStyle: this._children().map(function (child) {\n        return child.props.textStyle;\n      }),\n      activeTextStyle: this._children().map(function (child) {\n        return child.props.activeTextStyle;\n      }),\n      tabHeaderStyle: this._children().map(function (child) {\n        return _lodash2.default.get(child.props.heading.props, 'style', undefined);\n      }),\n      disabled: this._children().map(function (child) {\n        return child.props.disabled;\n      }),\n      accessible: this._children().map(function (child) {\n        return child.props.accessible == false ? false : true || true;\n      }),\n      accessibilityLabel: this._children().map(function (child) {\n        return child.props.accessibilityLabel;\n      }),\n      activeTab: this.state.currentPage,\n      scrollValue: this.state.scrollValue,\n      containerWidth: this.state.containerWidth\n    };\n\n    if (this.props.tabBarBackgroundColor) {\n      tabBarProps.backgroundColor = this.props.tabBarBackgroundColor;\n    }\n\n    if (this.props.tabBarActiveTextColor) {\n      tabBarProps.activeTextColor = this.props.tabBarActiveTextColor;\n    }\n\n    if (this.props.tabBarInactiveTextColor) {\n      tabBarProps.inactiveTextColor = this.props.tabBarInactiveTextColor;\n    }\n\n    if (this.props.tabBarTextStyle) {\n      tabBarProps.textStyle = this.props.tabBarTextStyle;\n    }\n\n    if (this.props.tabBarUnderlineStyle) {\n      tabBarProps.underlineStyle = this.props.tabBarUnderlineStyle;\n    }\n\n    if (this.props.tabContainerStyle) {\n      tabBarProps.tabContainerStyle = this.props.tabContainerStyle;\n    }\n\n    if (overlayTabs) {\n      var _tabBarProps$style;\n\n      tabBarProps.style = (_tabBarProps$style = {\n        position: 'absolute',\n        left: 0,\n        right: 0\n      }, _defineProperty(_tabBarProps$style, this.props.tabBarPosition === 'overlayTop' ? 'top' : 'bottom', 0), _defineProperty(_tabBarProps$style, 'backgroundColor', 'rgba(255, 255, 255, 0.7)'), _tabBarProps$style);\n    }\n\n    return React.createElement(View, {\n      style: [styles.container, this.props.style],\n      onLayout: this._handleLayout,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 342\n      }\n    }, (this.props.tabBarPosition === 'top' || this.props.tabBarPosition === 'overlayTop') && this.renderTabBar(tabBarProps), this.renderScrollableContent(), (this.props.tabBarPosition === 'bottom' || this.props.tabBarPosition === 'overlayBottom') && this.renderTabBar(tabBarProps));\n  }\n});\nexports.default = ScrollableTabView;\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1\n  },\n  scrollableContentAndroid: {\n    flex: 1\n  }\n});","map":{"version":3,"sources":["../../../../src/basic/Tabs/index.js"],"names":["React","require","Component","Dimensions","View","Animated","ScrollView","StyleSheet","Platform","ReactNative","SceneComponent","DefaultTabBar","ScrollableTabBar","ScrollableTabView","statics","propTypes","tabBarPosition","PropTypes","initialPage","page","onChangeTab","onScroll","renderTabBar","style","ViewPropTypes","contentProps","scrollWithoutAnimation","locked","prerenderingSiblingsNumber","getDefaultProps","getInitialState","currentPage","scrollValue","containerWidth","sceneKeys","componentDidMount","scrollFn","InteractionManager","setTimeout","x","animated","componentWillUnmount","clearTimeout","UNSAFE_componentWillReceiveProps","props","children","goToPage","offset","pageNumber","y","callback","updateSceneKeys","newKeys","previousKeys","newSceneKeys","key","_shouldRenderSceneKey","numOfSibling","idx","currentPageKey","_keyExists","_makeSceneKey","child","renderScrollableContent","scenes","offsetX","e","_composeScenes","width","_onMomentumScrollBeginAndEnd","Math","_updateSelectedPage","localNextPage","nextPage","_onChangeTab","i","ref","from","_updateScrollValue","_handleLayout","_children","render","overlayTabs","tabBarProps","tabs","tabStyle","activeTabStyle","textStyle","activeTextStyle","tabHeaderStyle","_","disabled","accessible","accessibilityLabel","activeTab","position","left","right","styles","container","flex","scrollableContentAndroid"],"mappings":"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","sourcesContent":["import PropTypes from 'prop-types';\nimport createReactClass from 'create-react-class';\nimport _ from 'lodash';\nimport { InteractionManager, ViewPropTypes } from '../../utils';\nconst React = require('react');\nconst { Component } = React;\nconst ReactNative = require('react-native');\nconst {\n  Dimensions,\n  View,\n  Animated,\n  ScrollView,\n  StyleSheet,\n  Platform\n} = ReactNative;\n\nconst SceneComponent = require('./SceneComponent');\nconst { DefaultTabBar } = require('./DefaultTabBar');\nconst { ScrollableTabBar } = require('./ScrollableTabBar');\n\nconst ScrollableTabView = createReactClass({\n  statics: {\n    DefaultTabBar,\n    ScrollableTabBar\n  },\n\n  propTypes: {\n    tabBarPosition: PropTypes.oneOf([\n      'top',\n      'bottom',\n      'overlayTop',\n      'overlayBottom'\n    ]),\n    initialPage: PropTypes.number,\n    page: PropTypes.number,\n    onChangeTab: PropTypes.func,\n    onScroll: PropTypes.func,\n    renderTabBar: PropTypes.any,\n    style: ViewPropTypes.style,\n    contentProps: PropTypes.object,\n    scrollWithoutAnimation: PropTypes.bool,\n    locked: PropTypes.bool,\n    prerenderingSiblingsNumber: PropTypes.number\n  },\n\n  getDefaultProps() {\n    return {\n      tabBarPosition: 'top',\n      initialPage: 0,\n      page: -1,\n      onChangeTab: () => {},\n      onScroll: () => {},\n      contentProps: {},\n      scrollWithoutAnimation: false,\n      locked: false,\n      prerenderingSiblingsNumber: 0\n    };\n  },\n\n  getInitialState() {\n    return {\n      currentPage: this.props.initialPage,\n      scrollValue: new Animated.Value(this.props.initialPage),\n      containerWidth: Dimensions.get('window').width,\n      sceneKeys: this.newSceneKeys({ currentPage: this.props.initialPage })\n    };\n  },\n\n  componentDidMount() {\n    const scrollFn = () => {\n      if (this.scrollView) {\n        this.state.scrollValue.setValue(this.props.initialPage);\n      }\n    };\n    InteractionManager.runAfterInteractions(scrollFn);\n    // because of contentOffset is not working on Android\n    this.scrollToTimer = setTimeout(() => {\n      if (this.scrollView) {\n        this.scrollView.scrollTo({\n          x: this.props.initialPage * this.state.containerWidth,\n          animated: false\n        });\n      }\n    });\n  },\n\n  componentWillUnmount() {\n    if (this.scrollToTimer) {\n      clearTimeout(this.scrollToTimer);\n    }\n  },\n\n  UNSAFE_componentWillReceiveProps(props) {\n    if (props.children !== this.props.children) {\n      this.updateSceneKeys({\n        page: this.state.currentPage,\n        children: props.children\n      });\n    }\n\n    if (props.page >= 0 && props.page !== this.state.currentPage) {\n      this.goToPage(props.page);\n    }\n  },\n\n  goToPage(pageNumber) {\n    const offset = pageNumber * this.state.containerWidth;\n    if (this.scrollView) {\n      this.scrollView.scrollTo({\n        x: offset,\n        y: 0,\n        animated: !this.props.scrollWithoutAnimation\n      });\n    }\n\n    const currentPage = this.state.currentPage;\n    this.updateSceneKeys({\n      page: pageNumber,\n      callback: this._onChangeTab.bind(this, currentPage, pageNumber)\n    });\n  },\n\n  renderTabBar(props) {\n    if (this.props.renderTabBar === false) {\n      return null;\n    } else if (this.props.renderTabBar) {\n      return React.cloneElement(this.props.renderTabBar(props), props);\n    }\n    return <DefaultTabBar {...props} />;\n  },\n\n  updateSceneKeys({\n                    page,\n                    children = this.props.children,\n                    callback = () => {}\n                  }) {\n    const newKeys = this.newSceneKeys({\n      previousKeys: this.state.sceneKeys,\n      currentPage: page,\n      children\n    });\n    this.setState({ currentPage: page, sceneKeys: newKeys }, callback);\n  },\n\n  newSceneKeys({\n                 previousKeys = [],\n                 currentPage = 0,\n                 children = this.props.children\n               }) {\n    const newKeys = [];\n    this._children(children).forEach((child, idx) => {\n      const key = this._makeSceneKey(child, idx);\n      if (\n        this._keyExists(previousKeys, key) ||\n        this._shouldRenderSceneKey(idx, currentPage)\n      ) {\n        newKeys.push(key);\n      }\n    });\n    return newKeys;\n  },\n\n  _shouldRenderSceneKey(idx, currentPageKey) {\n    const numOfSibling = this.props.prerenderingSiblingsNumber;\n    return (\n      idx < currentPageKey + numOfSibling + 1 &&\n      idx > currentPageKey - numOfSibling - 1\n    );\n  },\n\n  _keyExists(sceneKeys, key) {\n    return sceneKeys.find(sceneKey => key === sceneKey);\n  },\n\n  _makeSceneKey(child, idx) {\n    return `${child.props.heading}_${idx}`;\n  },\n\n  renderScrollableContent() {\n    const scenes = this._composeScenes();\n    return (\n      <ScrollView\n        horizontal\n        pagingEnabled\n        automaticallyAdjustContentInsets={false}\n        keyboardShouldPersistTaps=\"handled\"\n        contentOffset={{\n          x: this.props.initialPage * this.state.containerWidth\n        }}\n        ref={scrollView => {\n          this.scrollView = scrollView;\n        }}\n        onScroll={e => {\n          const offsetX = e.nativeEvent.contentOffset.x;\n          this._updateScrollValue(offsetX / this.state.containerWidth);\n        }}\n        onMomentumScrollBegin={this._onMomentumScrollBeginAndEnd}\n        onMomentumScrollEnd={this._onMomentumScrollBeginAndEnd}\n        scrollEventThrottle={16}\n        scrollsToTop={false}\n        showsHorizontalScrollIndicator={false}\n        scrollEnabled={!this.props.locked}\n        directionalLockEnabled\n        alwaysBounceVertical={false}\n        keyboardDismissMode=\"on-drag\"\n        {...this.props.contentProps}\n      >\n        {scenes}\n      </ScrollView>\n    );\n  },\n\n  _composeScenes() {\n    return this._children().map((child, idx) => {\n      const key = this._makeSceneKey(child, idx);\n      return (\n        <SceneComponent\n          key={child.key}\n          shouldUpdated={this._shouldRenderSceneKey(\n            idx,\n            this.state.currentPage\n          )}\n          style={{ width: this.state.containerWidth }}\n        >\n          {this._keyExists(this.state.sceneKeys, key) ? (\n            child\n          ) : (\n            <View heading={child.props.heading} />\n          )}\n        </SceneComponent>\n      );\n    });\n  },\n\n  _onMomentumScrollBeginAndEnd(e) {\n    const offsetX = e.nativeEvent.contentOffset.x;\n    const page = Math.round(offsetX / this.state.containerWidth);\n    if (this.state.currentPage !== page) {\n      this._updateSelectedPage(page);\n    }\n  },\n\n  _updateSelectedPage(nextPage) {\n    let localNextPage = nextPage;\n    if (typeof localNextPage === 'object') {\n      localNextPage = nextPage.nativeEvent.position;\n    }\n\n    const currentPage = this.state.currentPage;\n    this.updateSceneKeys({\n      page: localNextPage,\n      callback: this._onChangeTab.bind(this, currentPage, localNextPage)\n    });\n  },\n\n  _onChangeTab(prevPage, currentPage) {\n    this.props.onChangeTab({\n      i: currentPage,\n      ref: this._children()[currentPage],\n      from: prevPage\n    });\n  },\n\n  _updateScrollValue(value) {\n    this.state.scrollValue.setValue(value);\n    this.props.onScroll(value);\n  },\n\n  _handleLayout(e) {\n    const { width } = e.nativeEvent.layout;\n\n    if (\n      !width ||\n      width <= 0 ||\n      Math.round(width) === Math.round(this.state.containerWidth)\n    ) {\n      return;\n    }\n    this.setState({ containerWidth: width });\n    this.requestAnimationFrame(() => {\n      this.goToPage(this.state.currentPage);\n    });\n  },\n\n  _children(children = this.props.children) {\n    return React.Children.map(children, child => child);\n  },\n\n  render() {\n    const overlayTabs =\n      this.props.tabBarPosition === 'overlayTop' ||\n      this.props.tabBarPosition === 'overlayBottom';\n    const tabBarProps = {\n      goToPage: this.goToPage,\n      tabs: this._children().map(child => child.props.heading),\n      tabStyle: this._children().map(child => child.props.tabStyle),\n      activeTabStyle: this._children().map(child => child.props.activeTabStyle),\n      textStyle: this._children().map(child => child.props.textStyle),\n      activeTextStyle: this._children().map(\n        child => child.props.activeTextStyle\n      ),\n      tabHeaderStyle: this._children().map(child =>\n        _.get(child.props.heading.props, 'style', undefined)\n      ),\n      disabled: this._children().map(child => child.props.disabled),\n      accessible: this._children().map(child => child.props.accessible==false ? false : true || true ),\n      accessibilityLabel: this._children().map(child => child.props.accessibilityLabel),\n      activeTab: this.state.currentPage,\n      scrollValue: this.state.scrollValue,\n      containerWidth: this.state.containerWidth\n    };\n\n    if (this.props.tabBarBackgroundColor) {\n      tabBarProps.backgroundColor = this.props.tabBarBackgroundColor;\n    }\n    if (this.props.tabBarActiveTextColor) {\n      tabBarProps.activeTextColor = this.props.tabBarActiveTextColor;\n    }\n    if (this.props.tabBarInactiveTextColor) {\n      tabBarProps.inactiveTextColor = this.props.tabBarInactiveTextColor;\n    }\n    if (this.props.tabBarTextStyle) {\n      tabBarProps.textStyle = this.props.tabBarTextStyle;\n    }\n    if (this.props.tabBarUnderlineStyle) {\n      tabBarProps.underlineStyle = this.props.tabBarUnderlineStyle;\n    }\n    if (this.props.tabContainerStyle) {\n      tabBarProps.tabContainerStyle = this.props.tabContainerStyle;\n    }\n    if (overlayTabs) {\n      tabBarProps.style = {\n        position: 'absolute',\n        left: 0,\n        right: 0,\n        [this.props.tabBarPosition === 'overlayTop' ? 'top' : 'bottom']: 0,\n        backgroundColor: 'rgba(255, 255, 255, 0.7)'\n      };\n    }\n\n    return (\n      <View\n        style={[styles.container, this.props.style]}\n        onLayout={this._handleLayout}\n      >\n        {(this.props.tabBarPosition === 'top' ||\n          this.props.tabBarPosition === 'overlayTop') &&\n        this.renderTabBar(tabBarProps)}\n        {this.renderScrollableContent()}\n        {(this.props.tabBarPosition === 'bottom' ||\n          this.props.tabBarPosition === 'overlayBottom') &&\n        this.renderTabBar(tabBarProps)}\n      </View>\n    );\n  }\n});\n\nexport default ScrollableTabView;\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1\n  },\n  scrollableContentAndroid: {\n    flex: 1\n  }\n});\n"]},"metadata":{},"sourceType":"script"}